import{h as a,C as w,a as k,b as O}from"./index.94f362dc.js";import{r as u}from"./index.3284556e.js";import{j as r,a as o,F as $}from"./jsx-runtime.b03f6d4f.js";import{y as D}from"./iframe.c0530596.js";const d=[{background:"hsl(0deg 60% 80%)",foreground:"hsl(0deg 85% 35%)"},{background:"hsl(34deg 80% 80%)",foreground:"hsl(34deg 100% 35%)"},{background:"hsl(153deg 60% 70%)",foreground:"hsl(153deg 74% 25%)"}],z=[{start:a().hour(9).startOf("hour"),end:a().hour(10).startOf("hour"),title:"Event now",backgroundColor:d[0].background,color:d[0].foreground},{start:a().hour(9).startOf("hour").minutes(30),end:a().hour(10).startOf("hour").minutes(45),title:"Event overlapping now",backgroundColor:d[1].background,color:d[1].foreground},{start:a().hour(10).startOf("hour"),end:a().hour(10).startOf("hour").minutes(45),title:"Event overlapping now2",backgroundColor:d[1].background,color:d[1].foreground},{start:a().hour(13).startOf("hour"),end:a().hour(15).startOf("hour"),title:"Event now2",backgroundColor:d[1].background,color:d[1].foreground},{start:a().subtract(1,"days").hour(9).minute(30),end:a().subtract(1,"days").hour(10).endOf("hour"),title:"Event yesterday",backgroundColor:d[2].background,color:d[2].foreground}],V=I=>{const[p,S]=u.exports.useState(w.WEEK),{startHour:b=0,endHour:f=24}=I,[v,j]=u.exports.useState(a()),[y,m]=u.exports.useState(null),M=u.exports.useMemo(()=>[w.MONTH,w.WEEK].filter(i=>i!=p),[p]);u.exports.useEffect(()=>{const i=setInterval(()=>{j(a())},6e4);return()=>clearInterval(i)},[]);const g=D(i=>{i.target.classList.contains("week-day-event")||m(null)});return u.exports.useEffect(()=>(document.body.addEventListener("click",g),function(){window.removeEventListener("click",g)}),[g]),r(k,{mode:p,events:z,children:({prev:i,next:T,currentDate:H,setCurrentDate:L})=>o("div",{className:"calendar-view",children:[r("p",{children:M.map(n=>o("button",{onClick:()=>S(n),children:["Switch to ",n," view"]},n))}),o("p",{children:[r("button",{onClick:i,children:"\u2190"}),r("input",{type:"date",value:H.toISOString().split("T")[0],onChange:n=>L(new Date(n.target.value))}),r("button",{onClick:T,children:"\u2192"})]}),r(k.WeekMode,{startHour:b,endHour:f,children:(n,l,c,h)=>o("div",{className:"week-container",children:[o("div",{className:"week-day-lines",children:[r("div",{className:"week-day-header"}),l.map(t=>r("div",{className:"week-hour-marker",style:{height:`calc( ( 100% - 3em ) / ${f-b})`},children:a().hour(t).format("ha")},t))]}),n.map((t,s)=>{var x;return o("div",{className:["week-day",...t.dayTypes.map(e=>`week-day--${e}`)].join(" "),style:{gridColumn:`${s+2}`},children:[o("div",{className:"week-day-header",children:[r("div",{children:t.date.format("dddd")}),r("div",{children:t.date.format("ll")})]}),o("div",{className:"week-day-event-container",children:[(x=t.events)==null?void 0:x.map(e=>{var C,N,E;return o("div",{className:`week-day-event ${y===e?"week-day-event--selected":""}`,onClick:()=>m(e===y?null:e),style:{backgroundColor:e.backgroundColor,color:e.color,top:`${c(e.start)*100}%`,left:`${e.layoutInfo?((C=e.layoutInfo)==null?void 0:C.position)*25/(((N=e.layoutInfo)==null?void 0:N.overlappingEventsCount)+1):"0"}%`,width:`${e.layoutInfo?75+25/(((E=e.layoutInfo)==null?void 0:E.overlappingEventsCount)+1):100}%`,height:`${e.end?h(e.end.diff(e.start))*100+"%":"auto"}`},children:[r("div",{children:e.title}),o("div",{className:"week-day-event-hours",children:[a(e.start).format("LT")," -"," ",a(e.end).format("LT")]})]},e.start.unix())}),v.isSame(t.date,"day")&&r("div",{className:"week-day-now",style:{top:`${c(v)*100}%`}})]})]},t.date.unix())})]})}),r(k.MonthMode,{children:n=>o("div",{className:"month-container",children:[r(O,{currentDate:n[0].start,children:l=>o($,{children:[r("div",{className:"month-week-day--header"}),l.map(c=>r("div",{className:"month-week-day month-week-day--header",children:c.date.format("dd")},c.date.unix()))]})},`header-${n[0].start.unix()}`),n.map(l=>r(O,{currentDate:l.start,events:z,children:c=>o($,{children:[o("div",{className:"month-week-number",children:[l.start.week(),"."]}),c.map(h=>{var t;return o("div",{className:["month-week-day",...h.dayTypes.map(s=>`month-week-day--${s}`)].join(" "),children:[h.date.format("ll"),(t=h.events)==null?void 0:t.map(s=>r("div",{className:"month-week-day-event",style:{backgroundColor:s.color},children:r("div",{children:s.title})},s.start.unix()))]},h.date.unix())})]})},l.start.unix()))]})})]})})},W=V.bind({});W.args={startHour:8,endHour:20};const q=["CalendarView"];export{W as CalendarView,q as __namedExportsOrder};
//# sourceMappingURL=CalendarView.stories.08a3b720.js.map
