import{h as a,C as f,a as k,b as $}from"./index.fab957be.js";import{r as h}from"./index.3284556e.js";import{j as r,a as o,F as O}from"./jsx-runtime.b03f6d4f.js";import{y as H}from"./iframe.72b0ea12.js";const i=[{background:"hsl(0deg 60% 80%)",foreground:"hsl(0deg 85% 35%)"},{background:"hsl(34deg 80% 80%)",foreground:"hsl(34deg 100% 35%)"},{background:"hsl(153deg 60% 70%)",foreground:"hsl(153deg 74% 25%)"}],M=[{start:a().hour(9).startOf("hour"),end:a().hour(10).startOf("hour"),title:"Event now",backgroundColor:i[0].background,color:i[0].foreground},{start:a().hour(9).startOf("hour").minutes(30),end:a().hour(10).startOf("hour").minutes(45),title:"Event overlapping now",backgroundColor:i[1].background,color:i[1].foreground},{start:a().hour(10).startOf("hour"),end:a().hour(10).startOf("hour").minutes(45),title:"Event overlapping now2",backgroundColor:i[1].background,color:i[1].foreground},{start:a().hour(13).startOf("hour"),end:a().hour(15).startOf("hour"),title:"Event now2",backgroundColor:i[1].background,color:i[1].foreground},{start:a().subtract(1,"days").hour(9).minute(30),end:a().subtract(1,"days").hour(10).endOf("hour"),title:"Event yesterday",backgroundColor:i[2].background,color:i[2].foreground}],V=z=>{const[y,I]=h.exports.useState(f.WEEK),{startHour:x=0,endHour:C=24}=z,[N,S]=h.exports.useState(a()),[g,u]=h.exports.useState(null),j=h.exports.useMemo(()=>[f.MONTH,f.WEEK].filter(l=>l!=y),[y]);h.exports.useEffect(()=>{const l=setInterval(()=>{S(a())},6e4);return()=>clearInterval(l)},[]);const b=H(l=>{l.target.classList.contains("week-day-event")||l.target.classList.contains("month-day-event")||u(null)});return h.exports.useEffect(()=>(document.body.addEventListener("click",b),function(){window.removeEventListener("click",b)}),[b]),r(k,{mode:y,events:M,children:({prev:l,next:L,currentDate:T,setCurrentDate:D})=>o("div",{className:"calendar-view",children:[r("p",{children:j.map(n=>o("button",{onClick:()=>I(n),children:["Switch to ",n," view"]},n))}),o("p",{children:[r("button",{onClick:l,children:"\u2190"}),r("input",{type:"date",value:T.toISOString().split("T")[0],onChange:n=>D(new Date(n.target.value))}),r("button",{onClick:L,children:"\u2192"})]}),r(k.WeekMode,{startHour:x,endHour:C,children:(n,c,s,d)=>o("div",{className:"week-container",children:[o("div",{className:"week-day-lines",children:[r("div",{className:"week-day-header"}),c.map(t=>r("div",{className:"week-hour-marker",style:{height:`calc( ( 100% - 3em ) / ${C-x})`},children:a().hour(t).format("ha")},t))]}),n.map((t,w)=>{var m;return o("div",{className:["week-day",...t.dayTypes.map(e=>`week-day--${e}`)].join(" "),style:{gridColumn:`${w+2}`},children:[o("div",{className:"week-day-header",children:[r("div",{children:t.date.format("dd")}),r("strong",{children:t.date.format("D, MMM")})]}),o("div",{className:"week-day-event-container",children:[(m=t.events)==null?void 0:m.map(e=>{var v,p,E;return o("div",{className:`week-day-event ${g===e?"week-day-event--selected":""}`,onClick:()=>u(e===g?null:e),style:{backgroundColor:e.backgroundColor,color:e.color,top:`${s(e.start)*100}%`,left:`calc(5px + ${e.layoutInfo?((v=e.layoutInfo)==null?void 0:v.position)*25/(((p=e.layoutInfo)==null?void 0:p.overlappingEventsCount)+1):"0"}%)`,width:`calc(${e.layoutInfo?75+25/(((E=e.layoutInfo)==null?void 0:E.overlappingEventsCount)+1):100}% - 10px)`,height:`${e.end?d(e.end.diff(e.start))*100+"%":"auto"}`},children:[r("div",{children:e.title}),o("div",{className:"week-day-event-hours",children:[a(e.start).format("LT")," -"," ",a(e.end).format("LT")]})]},e.start.unix())}),N.isSame(t.date,"day")&&r("div",{className:"week-day-now",style:{top:`${s(N)*100}%`}})]})]},t.date.unix())})]})}),r(k.MonthMode,{children:n=>o("div",{className:"month-container",children:[r($,{currentDate:n[0].start,children:c=>o(O,{children:[r("div",{className:"month-day--header"}),c.map(s=>r("div",{className:"month-day month-day--header",children:s.date.format("dd")},s.date.unix()))]})},`header-${n[0].start.unix()}`),n.map(c=>r($,{currentDate:c.start,events:M,children:s=>o(O,{children:[o("div",{className:"month-week-number",children:[c.start.week(),"."]}),s.map(d=>{var t,w,m;return o("div",{className:["month-day",...d.dayTypes.map(e=>`month-day--${e}`)].join(" "),children:[d.date.format("ll"),(t=d.events)==null?void 0:t.filter((e,v)=>{var p;return v<2||d.events&&((p=d.events)==null?void 0:p.length)<=3}).map(e=>r("div",{className:`month-day-event ${g===e?"month-day-event--selected":""}`,style:{backgroundColor:e.backgroundColor,color:e.color},onClick:()=>u(e===g?null:e),children:e.title},e.start.unix())),d.events&&((w=d.events)==null?void 0:w.length)>3?o("div",{className:"month-day-more-events",children:[((m=d.events)==null?void 0:m.length)-2," more"]}):""]},d.date.unix())})]})},c.start.unix()))]})})]})})},W=V.bind({});W.args={startHour:8,endHour:20};const q=["CalendarView"];export{W as CalendarView,q as __namedExportsOrder};
//# sourceMappingURL=CalendarView.stories.e6a930f0.js.map
