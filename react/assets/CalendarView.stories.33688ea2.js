import{h as t,C as f,a as k,b as $}from"./index.85f44c0b.js";import{r as h}from"./index.3284556e.js";import{j as r,a as o,F as O}from"./jsx-runtime.b03f6d4f.js";import{y as H}from"./iframe.006dd8db.js";const i=[{background:"hsl(0deg 60% 80%)",foreground:"hsl(0deg 85% 35%)"},{background:"hsl(34deg 80% 80%)",foreground:"hsl(34deg 100% 35%)"},{background:"hsl(153deg 60% 70%)",foreground:"hsl(153deg 74% 25%)"}],M=[{start:t().hour(9).startOf("hour"),end:t().hour(10).startOf("hour"),title:"Event now",backgroundColor:i[0].background,color:i[0].foreground},{start:t().hour(9).startOf("hour").minutes(30),end:t().hour(10).startOf("hour").minutes(45),title:"Event overlapping now",backgroundColor:i[1].background,color:i[1].foreground},{start:t().hour(10).startOf("hour"),end:t().hour(10).startOf("hour").minutes(45),title:"Event overlapping now2",backgroundColor:i[1].background,color:i[1].foreground},{start:t().hour(13).startOf("hour"),end:t().hour(15).startOf("hour"),title:"Event now2",backgroundColor:i[1].background,color:i[1].foreground},{start:t().subtract(1,"days").hour(9).minute(30),end:t().subtract(1,"days").hour(10).endOf("hour"),title:"Event yesterday",backgroundColor:i[2].background,color:i[2].foreground}],V=z=>{const[y,I]=h.exports.useState(f.WEEK),{startHour:x=0,endHour:C=24}=z,[N,S]=h.exports.useState(t()),[p,u]=h.exports.useState(null),j=h.exports.useMemo(()=>[f.MONTH,f.WEEK].filter(l=>l!=y),[y]);h.exports.useEffect(()=>{const l=setInterval(()=>{S(t())},6e4);return()=>clearInterval(l)},[]);const b=H(l=>{l.target.classList.contains("week-day-event")||l.target.classList.contains("month-day-event")||u(null)});return h.exports.useEffect(()=>(document.body.addEventListener("click",b),function(){window.removeEventListener("click",b)}),[b]),r(k,{mode:y,events:M,children:({prev:l,next:L,currentDate:T,setCurrentDate:D})=>o("div",{className:"calendar-view",children:[r("p",{children:j.map(n=>o("button",{onClick:()=>I(n),children:["Switch to ",n," view"]},n))}),o("p",{children:[r("button",{onClick:l,children:"\u2190"}),r("input",{type:"date",value:T.toISOString().split("T")[0],onChange:n=>D(new Date(n.target.value))}),r("button",{onClick:L,children:"\u2192"})]}),r(k.WeekMode,{startHour:x,endHour:C,children:(n,s,c,d)=>o("div",{className:"week-container",children:[o("div",{className:"week-day-lines",children:[r("div",{className:"week-day-header"}),s.map(a=>r("div",{className:"week-hour-marker",style:{height:`calc( ( 100% - 3em ) / ${C-x})`},children:t().hour(a).format("ha")},a))]}),n.map((a,w)=>{var m;return o("div",{className:["week-day",...a.dayTypes.map(e=>`week-day--${e}`)].join(" "),style:{gridColumn:`${w+2}`},children:[o("div",{className:"week-day-header",children:[r("div",{children:a.date.format("dd")}),r("strong",{children:a.date.format("D, MMM")})]}),o("div",{className:"week-day-event-container",children:[(m=a.events)==null?void 0:m.map(e=>{var v,g,E;return o("div",{className:`week-day-event ${p===e?"week-day-event--selected":""}`,onClick:()=>u(e===p?null:e),style:{backgroundColor:e.backgroundColor,color:e.color,top:`${c(e.start)*100}%`,left:`${e.layoutInfo?((v=e.layoutInfo)==null?void 0:v.position)*25/(((g=e.layoutInfo)==null?void 0:g.overlappingEventsCount)+1):"0"}%`,width:`${e.layoutInfo?75+25/(((E=e.layoutInfo)==null?void 0:E.overlappingEventsCount)+1):100}%`,height:`${e.end?d(e.end.diff(e.start))*100+"%":"auto"}`},children:[r("div",{children:e.title}),o("div",{className:"week-day-event-hours",children:[t(e.start).format("LT")," -"," ",t(e.end).format("LT")]})]},e.start.unix())}),N.isSame(a.date,"day")&&r("div",{className:"week-day-now",style:{top:`${c(N)*100}%`}})]})]},a.date.unix())})]})}),r(k.MonthMode,{children:n=>o("div",{className:"month-container",children:[r($,{currentDate:n[0].start,children:s=>o(O,{children:[r("div",{className:"month-day--header"}),s.map(c=>r("div",{className:"month-day month-day--header",children:c.date.format("dd")},c.date.unix()))]})},`header-${n[0].start.unix()}`),n.map(s=>r($,{currentDate:s.start,events:M,children:c=>o(O,{children:[o("div",{className:"month-week-number",children:[s.start.week(),"."]}),c.map(d=>{var a,w,m;return o("div",{className:["month-day",...d.dayTypes.map(e=>`month-day--${e}`)].join(" "),children:[d.date.format("ll"),(a=d.events)==null?void 0:a.filter((e,v)=>{var g;return v<2||d.events&&((g=d.events)==null?void 0:g.length)<=3}).map(e=>r("div",{className:`month-day-event ${p===e?"month-day-event--selected":""}`,style:{backgroundColor:e.backgroundColor,color:e.color},onClick:()=>u(e===p?null:e),children:e.title},e.start.unix())),d.events&&((w=d.events)==null?void 0:w.length)>3?o("div",{className:"month-day-more-events",children:[((m=d.events)==null?void 0:m.length)-2," more"]}):""]},d.date.unix())})]})},s.start.unix()))]})})]})})},W=V.bind({});W.args={startHour:8,endHour:20};const q=["CalendarView"];export{W as CalendarView,q as __namedExportsOrder};
//# sourceMappingURL=CalendarView.stories.33688ea2.js.map
